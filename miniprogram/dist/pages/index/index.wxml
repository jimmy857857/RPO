<!--index.wxml-->
<view class="container">
  <!-- é¡¶éƒ¨é¢„ç®—ä¿¡æ¯ -->
  <view class="budget-card">
    <view class="budget-header">
      <text class="budget-title">æœ¬æœˆé¢„ç®—</text>
      <text class="budget-date">{{currentMonth}}</text>
    </view>
    <view class="budget-content">
      <view class="budget-item">
        <text class="budget-label">å·²æ”¯å‡º</text>
        <text class="budget-value expense">{{formattedExpense}}å…ƒ</text>
      </view>
      <view class="budget-item">
        <text class="budget-label">å‰©ä½™</text>
        <text class="budget-value remaining">{{formattedRemaining}}å…ƒ</text>
      </view>
      <view class="budget-item">
        <text class="budget-label">é¢„ç®—</text>
        <text class="budget-value total">{{formattedBudget}}å…ƒ</text>
      </view>
    </view>
    <view class="budget-progress">
      <view class="progress-bar">
        <view class="progress-fill" style="width: {{budgetProgress}}%"></view>
      </view>
      <text class="progress-text">{{budgetProgress}}%</text>
    </view>
  </view>



  <!-- åŠŸèƒ½æ¨¡å— -->
  <view class="module-section">
    <view class="section-title">è®°è´¦ç®¡ç†</view>
    <view class="module-grid">
      <view class="module-item" bindtap="navigateToAccounting">
        <view class="module-icon accounting">ğŸ’°</view>
        <text class="module-text">å¿«é€Ÿè®°è´¦</text>
      </view>
      <view class="module-item" bindtap="navigateToStatistics">
        <view class="module-icon statistics">ğŸ“Š</view>
        <text class="module-text">æ•°æ®ç»Ÿè®¡</text>
      </view>
      <view class="module-item" bindtap="navigateToBudget">
        <view class="module-icon budget">ğŸ¯</view>
        <text class="module-text">é¢„ç®—è®¾ç½®</text>
      </view>
    </view>
  </view>

  <view class="module-section">
    <view class="section-title">èšä¼šæ¸¸æˆ</view>
    <view class="module-grid">
      <view class="module-item" bindtap="navigateToWheel">
        <view class="module-icon wheel">ğŸ¡</view>
        <text class="module-text">è½¬ç›˜æ¸¸æˆ</text>
      </view>
      <view class="module-item" bindtap="navigateToQA">
        <view class="module-icon qa">â“</view>
        <text class="module-text">çœŸå¿ƒè¯</text>
      </view>
      <view class="module-item" bindtap="navigateToDice">
        <view class="module-icon dice">ğŸ²</view>
        <text class="module-text">éª°å­æ¸¸æˆ</text>
      </view>
    </view>
  </view>

  <!-- æœ€è¿‘è®°å½• -->
  <view class="recent-section" wx:if="{{recentRecords.length > 0}}">
    <view class="section-title">æœ€è¿‘è®°å½•</view>
    <view class="record-list">
      <view class="record-item" wx:for="{{recentRecords}}" wx:key="id">
        <view class="record-left">
          <view class="record-category {{item.type}}">{{item.category}}</view>
          <view class="record-note">{{item.note || 'æ— å¤‡æ³¨'}}</view>
        </view>
        <view class="record-right">
          <view class="record-amount {{item.type}}">{{item.type === 'expense' ? '-' : '+'}}{{item.amount}}</view>
          <view class="record-time">{{item.time}}</view>
        </view>
      </view>
    </view>
  </view>
</view>