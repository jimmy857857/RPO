<!--pages/accounting/record.wxml-->
<view class="container">
  <!-- è®°è´¦ç±»å‹é€‰æ‹© -->
  <view class="type-section">
    <view class="type-buttons">
      <view 
        class="type-btn {{recordType === 'expense' ? 'active' : ''}}" 
        data-type="expense"
        bindtap="onTypeChange"
      >
        <text class="type-icon">ğŸ“¤</text>
        <text class="type-text">æ”¯å‡º</text>
      </view>
      <view 
        class="type-btn {{recordType === 'income' ? 'active' : ''}}" 
        data-type="income"
        bindtap="onTypeChange"
      >
        <text class="type-icon">ğŸ“¥</text>
        <text class="type-text">æ”¶å…¥</text>
      </view>
    </view>
  </view>

  <!-- é‡‘é¢è¾“å…¥ -->
  <view class="amount-section">
    <view class="amount-input">
      <text class="currency-symbol">Â¥</text>
      <input 
        class="amount-field" 
        type="digit" 
        placeholder="0.00" 
        value="{{amount}}"
        bindinput="onAmountInput"
        focus="{{true}}"
      />
    </view>
  </view>

  <!-- åˆ†ç±»é€‰æ‹© -->
  <view class="category-section">
    <view class="section-header">
      <text class="section-title" style="color: var(--dopamine-primary);">é€‰æ‹©åˆ†ç±»</text>
    </view>
    <view class="category-grid">
      <view 
        class="category-item {{selectedCategory === item.id ? 'active' : ''}}" 
        wx:for="{{categories}}" 
        wx:key="id"
        data-category="{{item.id}}"
        bindtap="onCategorySelect"
      >
        <text class="category-icon">{{item.icon}}</text>
        <text class="category-name">{{item.name}}</text>
      </view>
    </view>
  </view>

  <!-- è¯¦ç»†ä¿¡æ¯ -->
  <view class="detail-section">
    <view class="detail-item">
      <text class="detail-label">æ—¥æœŸ</text>
      <picker 
        class="date-picker" 
        mode="date" 
        value="{{recordDate}}"
        bindchange="onDateChange"
      >
        <text class="date-text">{{recordDate}}</text>
      </picker>
    </view>

    <view class="detail-item">
      <text class="detail-label">æ”¯ä»˜æ–¹å¼</text>
      <picker 
        class="payment-picker" 
        range="{{paymentMethods}}"
        value="{{paymentIndex}}"
        bindchange="onPaymentChange"
      >
        <text class="payment-text">{{paymentMethods[paymentIndex]}}</text>
      </picker>
    </view>

    <view class="detail-item">
      <text class="detail-label">å¤‡æ³¨</text>
      <input 
        class="note-input" 
        placeholder="æ·»åŠ å¤‡æ³¨ï¼ˆå¯é€‰ï¼‰"
        value="{{note}}"
        bindinput="onNoteInput"
      />
    </view>

    <view class="detail-item">
      <text class="detail-label">ä¸Šä¼ å‡­è¯</text>
      <view class="upload-section">
        <view 
          class="upload-btn" 
          bindtap="onUploadReceipt"
          wx:if="{{!receiptImage}}"
        >
          <text class="upload-icon">ğŸ“</text>
          <text class="upload-text">ä¸Šä¼ å›¾ç‰‡</text>
        </view>
        <view class="image-preview" wx:if="{{receiptImage}}">
          <image class="receipt-image" src="{{receiptImage}}" mode="aspectFill"></image>
          <button class="remove-btn" bindtap="onRemoveImage">Ã—</button>
        </view>
      </view>
    </view>
  </view>

  <!-- æ“ä½œæŒ‰é’® -->
  <view class="action-section">
    <button 
      class="action-btn save-btn" 
      bindtap="onSaveRecord"
      disabled="{{!amount || !selectedCategory}}"
    >
      {{isEditing ? 'æ›´æ–°è®°å½•' : 'ä¿å­˜è®°å½•'}}
    </button>
    
    <button 
      class="action-btn cancel-btn" 
      bindtap="onCancel"
      wx:if="{{isEditing}}"
    >
      å–æ¶ˆç¼–è¾‘
    </button>
  </view>

  <!-- å¿«æ·æ“ä½œ -->
  <view class="quick-section">
    <view class="quick-title">å¸¸ç”¨é‡‘é¢</view>
    <view class="quick-amounts">
      <view 
        class="quick-item" 
        wx:for="{{quickAmounts}}" 
        wx:key="index"
        data-amount="{{item}}"
        bindtap="onQuickAmountSelect"
      >
        <text class="quick-text">Â¥{{item}}</text>
      </view>
    </view>
  </view>


</view>