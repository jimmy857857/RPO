<!--pages/games/qa.wxml-->
<view class="container">
  <!-- æ¸¸æˆç±»å‹é€‰æ‹© -->
  <view class="game-type-section">
    <view class="type-buttons">
      <view 
        class="type-btn {{gameType === 'truth' ? 'active' : ''}}" 
        data-type="truth"
        bindtap="onGameTypeChange"
      >
        <text class="type-icon">ğŸ’¬</text>
        <text class="type-text">çœŸå¿ƒè¯</text>
      </view>
      <view 
        class="type-btn {{gameType === 'dare' ? 'active' : ''}}" 
        data-type="dare"
        bindtap="onGameTypeChange"
      >
        <text class="type-icon">ğŸ¯</text>
        <text class="type-text">å¤§å†’é™©</text>
      </view>
      <view 
        class="type-btn {{gameType === 'mixed' ? 'active' : ''}}" 
        data-type="mixed"
        bindtap="onGameTypeChange"
      >
        <text class="type-icon">ğŸ²</text>
        <text class="type-text">æ··åˆæ¨¡å¼</text>
      </view>
    </view>
  </view>

  <!-- å½“å‰ç©å®¶ä¿¡æ¯ -->
  <view class="player-section">
    <view class="current-player">
      <text class="player-label">å½“å‰ç©å®¶</text>
      <text class="player-name">{{players[currentPlayer]}}</text>
    </view>
    <view class="players-count">
      <text class="count-text">{{players.length}}ä½ç©å®¶</text>
      <button class="add-player-btn" bindtap="onAddPlayer">+</button>
    </view>
  </view>

  <!-- é—®é¢˜å±•ç¤ºåŒºåŸŸ -->
  <view class="question-section">
    <view class="question-card {{showQuestion ? 'show' : ''}}">
      <view class="question-header">
        <text class="question-type">{{getQuestionTypeText()}}</text>
        <text class="question-number">ç¬¬{{usedQuestions.length}}é¢˜</text>
      </view>
      <view class="question-content">
        <text class="question-text">{{currentQuestion}}</text>
      </view>
      <view class="question-footer">
        <text class="question-tip">è¯·è¯šå®å›ç­”æˆ–å®ŒæˆæŒ‘æˆ˜ï¼</text>
      </view>
    </view>

    <!-- ç©ºçŠ¶æ€ -->
    <view class="empty-state" wx:if="{{!showQuestion}}">
      <view class="empty-icon">â“</view>
      <text class="empty-text">ç‚¹å‡»æŠ½é¢˜å¼€å§‹æ¸¸æˆ</text>
      <text class="empty-desc">å‡†å¤‡å¥½è¿æ¥æŒ‘æˆ˜äº†å—ï¼Ÿ</text>
    </view>
  </view>

  <!-- æ“ä½œæŒ‰é’® -->
  <view class="action-buttons">
    <button 
      class="action-btn draw-btn" 
      bindtap="onDrawQuestion"
      wx:if="{{!showQuestion}}"
    >
      <text class="btn-icon">ğŸ¯</text>
      <text class="btn-text">æŠ½å–é¢˜ç›®</text>
    </button>

    <view class="action-group" wx:if="{{showQuestion}}">
      <button class="action-btn change-btn" bindtap="onChangeQuestion">
        <text class="btn-icon">ğŸ”„</text>
        <text class="btn-text">æ¢ä¸€é¢˜</text>
      </button>
      <button class="action-btn next-btn" bindtap="onNextPlayer">
        <text class="btn-icon">â¡ï¸</text>
        <text class="btn-text">ä¸‹ä¸€ç©å®¶</text>
      </button>
    </view>
  </view>

  <!-- é™„åŠ åŠŸèƒ½ -->
  <view class="extra-actions">
    <button class="extra-btn custom-btn" bindtap="onCustomQuestion">
      <text class="btn-icon">âœï¸</text>
      <text class="btn-text">è‡ªå®šä¹‰é¢˜ç›®</text>
    </button>
    <button class="extra-btn share-btn" bindtap="onShareQuestion">
      <text class="btn-icon">ğŸ“¤</text>
      <text class="btn-text">åˆ†äº«é¢˜ç›®</text>
    </button>
    <button class="extra-btn restart-btn" bindtap="onRestartGame">
      <text class="btn-icon">ğŸ”„</text>
      <text class="btn-text">é‡æ–°å¼€å§‹</text>
    </button>
  </view>

  <!-- æ¸¸æˆç»Ÿè®¡ -->
  <view class="stats-section">
    <view class="stats-card">
      <view class="stat-item">
        <text class="stat-value">{{usedQuestions.length}}</text>
        <text class="stat-label">å·²ä½¿ç”¨é¢˜ç›®</text>
      </view>
      <view class="stat-item">
        <text class="stat-value">{{getTotalQuestions()}}</text>
        <text class="stat-label">æ€»é¢˜ç›®æ•°</text>
      </view>
      <view class="stat-item">
        <text class="stat-value">{{Math.round(usedQuestions.length / getTotalQuestions() * 100)}}%</text>
        <text class="stat-label">ä½¿ç”¨ç‡</text>
      </view>
    </view>
  </view>
</view>