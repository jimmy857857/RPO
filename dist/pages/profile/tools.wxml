<!--pages/profile/tools.wxml-->
<view class="container">
  <!-- å·¥å…·é€‰æ‹© -->
  <view class="tools-section">
    <view class="section-header">
      <text class="section-title" style="color: var(--dopamine-primary);">åŸºç¡€åŠŸèƒ½</text>
    </view>
    <scroll-view class="tools-list" scroll-x="true">
      <view 
        class="tool-item {{currentTool === tool.id ? 'active' : ''}}" 
        wx:for="{{tools}}" 
        wx:key="id"
        data-tool="{{tool.id}}"
        bindtap="onToolChange"
      >
        <text class="tool-icon">{{tool.icon}}</text>
        <text class="tool-name">{{tool.name}}</text>
      </view>
    </scroll-view>
  </view>

  <!-- è®¡ç®—å™¨ -->
  <view class="tool-content" wx:if="{{currentTool === 'calculator'}}">
    <view class="calculator-display">
      <text class="display-text">{{calculator.display}}</text>
    </view>
    
    <view class="calculator-buttons">
      <view class="button-row">
        <button class="calc-btn function" data-value="C" bindtap="onCalculatorInput">C</button>
        <button class="calc-btn function" data-value="CE" bindtap="onCalculatorInput">CE</button>
        <button class="calc-btn operator" data-value="/" bindtap="onCalculatorInput">Ã·</button>
        <button class="calc-btn operator" data-value="*" bindtap="onCalculatorInput">Ã—</button>
      </view>
      
      <view class="button-row">
        <button class="calc-btn number" data-value="7" bindtap="onCalculatorInput">7</button>
        <button class="calc-btn number" data-value="8" bindtap="onCalculatorInput">8</button>
        <button class="calc-btn number" data-value="9" bindtap="onCalculatorInput">9</button>
        <button class="calc-btn operator" data-value="-" bindtap="onCalculatorInput">-</button>
      </view>
      
      <view class="button-row">
        <button class="calc-btn number" data-value="4" bindtap="onCalculatorInput">4</button>
        <button class="calc-btn number" data-value="5" bindtap="onCalculatorInput">5</button>
        <button class="calc-btn number" data-value="6" bindtap="onCalculatorInput">6</button>
        <button class="calc-btn operator" data-value="+" bindtap="onCalculatorInput">+</button>
      </view>
      
      <view class="button-row">
        <button class="calc-btn number wide" data-value="1" bindtap="onCalculatorInput">1</button>
        <button class="calc-btn number" data-value="2" bindtap="onCalculatorInput">2</button>
        <button class="calc-btn number" data-value="3" bindtap="onCalculatorInput">3</button>
        <button class="calc-btn operator tall" data-value="=" bindtap="onCalculatorInput">=</button>
      </view>
      
      <view class="button-row">
        <button class="calc-btn number wide" data-value="0" bindtap="onCalculatorInput">0</button>
        <button class="calc-btn number" data-value="." bindtap="onCalculatorInput">.</button>
      </view>
    </view>
  </view>

  <!-- æ±‡ç‡æ¢ç®— -->
  <view class="tool-content" wx:if="{{currentTool === 'currency'}}">
    <view class="currency-converter">
      <view class="conversion-section">
        <view class="input-group">
          <text class="input-label">ä»</text>
          <picker 
            class="currency-picker" 
            range="{{['CNY', 'USD', 'EUR']}}"
            value="{{0}}"
          >
            <text class="picker-text">{{currency.fromCurrency}}</text>
          </picker>
          <input 
            class="amount-input" 
            type="digit" 
            placeholder="é‡‘é¢"
            value="{{currency.amount}}"
            data-field="amount"
            bindinput="onCurrencyInput"
          />
        </view>
        
        <button class="switch-btn" bindtap="onCurrencySwitch">
          <text class="switch-icon">â‡…</text>
        </button>
        
        <view class="input-group">
          <text class="input-label">åˆ°</text>
          <picker 
            class="currency-picker" 
            range="{{['USD', 'CNY', 'EUR']}}"
            value="{{1}}"
          >
            <text class="picker-text">{{currency.toCurrency}}</text>
          </picker>
          <input 
            class="amount-input result" 
            type="digit" 
            value="{{currency.result}}"
            disabled
          />
        </view>
      </view>
      
      <view class="rate-info">
        <text class="rate-text">æ±‡ç‡: 1 {{currency.fromCurrency}} = {{currency.rate}} {{currency.toCurrency}}</text>
        <text class="update-time">æ›´æ–°äº: {{currency.updateTime}}</text>
      </view>
      
      <view class="currency-grid">
        <view class="currency-item">
          <text class="currency-symbol">ğŸ‡¨ğŸ‡³</text>
          <text class="currency-name">äººæ°‘å¸</text>
          <text class="currency-code">CNY</text>
        </view>
        <view class="currency-item">
          <text class="currency-symbol">ğŸ‡ºğŸ‡¸</text>
          <text class="currency-name">ç¾å…ƒ</text>
          <text class="currency-code">USD</text>
        </view>
        <view class="currency-item">
          <text class="currency-symbol">ğŸ‡ªğŸ‡º</text>
          <text class="currency-name">æ¬§å…ƒ</text>
          <text class="currency-code">EUR</text>
        </view>
      </view>
    </view>
  </view>

  <!-- AAåˆ¶åˆ†æ‘Š -->
  <view class="tool-content" wx:if="{{currentTool === 'split'}}">
    <view class="split-calculator">
      <view class="input-section">
        <view class="input-group">
          <text class="input-label">æ€»é‡‘é¢</text>
          <input 
            class="amount-input" 
            type="digit" 
            placeholder="0.00"
            value="{{split.totalAmount}}"
            data-field="totalAmount"
            bindinput="onSplitInput"
          />
        </view>
        
        <view class="input-group">
          <text class="input-label">äººæ•°</text>
          <input 
            class="count-input" 
            type="number" 
            placeholder="2"
            value="{{split.peopleCount}}"
            data-field="peopleCount"
            bindinput="onSplitInput"
          />
        </view>
        
        <view class="option-group">
          <view class="option-item">
            <text class="option-label">åŒ…å«ç¨è´¹</text>
            <switch 
              checked="{{split.includeTax}}"
              bindchange="onTaxToggle"
            />
          </view>
          
          <view class="option-item" wx:if="{{split.includeTax}}">
            <text class="option-label">ç¨ç‡(%)</text>
            <input 
              class="tax-input" 
              type="number" 
              placeholder="10"
              value="{{split.taxRate}}"
              data-field="taxRate"
              bindinput="onSplitInput"
            />
          </view>
        </view>
        
        <view class="input-group">
          <text class="input-label">å°è´¹é‡‘é¢</text>
          <input 
            class="tip-input" 
            type="digit" 
            placeholder="0.00"
            value="{{split.tipAmount}}"
            bindinput="onTipInput"
          />
        </view>
      </view>
      
      <view class="result-section">
        <view class="result-card">
          <text class="result-label">æ¯äººåº”ä»˜</text>
          <text class="result-amount">Â¥{{split.result}}</text>
          <text class="result-desc">å…± {{split.peopleCount}} äºº</text>
        </view>
        
        <view class="breakdown">
          <text class="breakdown-title">è´¹ç”¨æ˜ç»†</text>
          <view class="breakdown-item">
            <text class="breakdown-label">æ€»é‡‘é¢</text>
            <text class="breakdown-value">Â¥{{split.totalAmount ? split.totalAmount : '0.00'}}</text>
          </view>
          <view class="breakdown-item" wx:if="{{split.includeTax}}">
            <text class="breakdown-label">ç¨è´¹</text>
            <text class="breakdown-value">Â¥{{split.taxAmount}}</text>
          </view>
          <view class="breakdown-item" wx:if="{{split.tipAmount}}">
            <text class="breakdown-label">å°è´¹</text>
            <text class="breakdown-value">Â¥{{split.tipAmount}}</text>
          </view>
        </view>
      </view>
    </view>
  </view>

  <!-- å…¶ä»–å·¥å…·å ä½ -->
  <view class="tool-content" wx:if="{{showOtherTools}}">
    <view class="coming-soon">
      <text class="soon-icon">ğŸš§</text>
      <text class="soon-title">å¼€å‘ä¸­</text>
      <text class="soon-desc">è¯¥åŠŸèƒ½æ­£åœ¨ç´§å¼ å¼€å‘ä¸­ï¼Œæ•¬è¯·æœŸå¾…ï¼</text>
    </view>
  </view>

  <!-- åˆ†äº«æŒ‰é’® -->
  <view class="share-section">
    <button class="share-btn" bindtap="onShareTool">
      <text class="share-icon">ğŸ“¤</text>
      åˆ†äº«å·¥å…·
    </button>
  </view>
</view>