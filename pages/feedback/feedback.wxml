<!--pages/feedback/feedback.wxml-->
<view class="feedback-container">
  <!-- 标题 -->
  <view class="feedback-header">
    <text class="feedback-title">意见反馈</text>
    <text class="feedback-subtitle">我们重视您的每一个建议</text>
  </view>

  <!-- 反馈表单 -->
  <view class="feedback-form">
    <!-- 反馈类型 -->
    <view class="form-section">
      <text class="section-label">反馈类型</text>
      <radio-group class="type-radio-group" bindchange="onTypeChange">
        <label class="radio-item">
          <radio value="suggestion" checked="{{feedbackType === 'suggestion'}}" color="#28A745" />
          <text class="radio-text">功能建议</text>
        </label>
        <label class="radio-item">
          <radio value="bug" checked="{{feedbackType === 'bug'}}" color="#28A745" />
          <text class="radio-text">问题反馈</text>
        </label>
        <label class="radio-item">
          <radio value="other" checked="{{feedbackType === 'other'}}" color="#28A745" />
          <text class="radio-text">其他</text>
        </label>
      </radio-group>
    </view>

    <!-- 反馈内容 -->
    <view class="form-section">
      <text class="section-label">反馈内容</text>
      <textarea 
        class="content-textarea" 
        placeholder="请详细描述您的建议或遇到的问题（10-500字）"
        value="{{content}}"
        bindinput="onContentInput"
        maxlength="500"
        show-confirm-bar="{{false}}"
      ></textarea>
      <text class="char-count">{{content.length}}/500</text>
    </view>

    <!-- 联系方式 -->
    <view class="form-section">
      <text class="section-label">联系方式（选填）</text>
      <input 
        class="contact-input" 
        type="text" 
        placeholder="邮箱/手机号/微信号"
        value="{{contact}}"
        bindinput="onContactInput"
        maxlength="50"
      />
    </view>

    <!-- 图片上传 -->
    <view class="form-section">
      <text class="section-label">相关截图（选填）</text>
      <view class="image-upload-section">
        <view class="image-list">
          <view class="image-item" wx:for="{{images}}" wx:key="index" data-index="{{index}}">
            <image class="preview-image" src="{{item}}" mode="aspectFill" bindtap="onPreviewImage"></image>
            <view class="remove-btn" bindtap="onRemoveImage" data-index="{{index}}">×</view>
          </view>
          <view class="upload-btn" wx:if="{{images.length < 3}}" bindtap="onChooseImage">
            <text class="upload-icon">+</text>
            <text class="upload-text">添加图片</text>
          </view>
        </view>
        <text class="image-tip">最多可上传3张图片</text>
      </view>
    </view>
  </view>

  <!-- 操作按钮 -->
  <view class="action-buttons">
    <button class="submit-btn" bindtap="onSubmit" disabled="{{submitting}}">
      {{submitting ? '提交中...' : '提交反馈'}}
    </button>
    <button class="clear-btn" bindtap="onClear">清空</button>
  </view>

  <!-- 底部说明 -->
  <view class="footer-note">
    <text class="note-text">我们会在1-3个工作日内处理您的反馈，感谢您的支持！</text>
  </view>
</view>